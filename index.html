<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WuWa Engine.ini Generator</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <!-- ‚úÖ External CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- üé¨ Background Video -->
    <video autoplay muted loop playsinline id="bg-video">
        <source src="assets/video/MovingBG.mp4" type="video/mp4">
    </video>

    <!-- üåê Navbar Placeholder -->
    <div id="navbar"></div>

    <main>
        <h1>WuWa Engine.ini Generator</h1>

        <!-- üîß Special In-Game Toggles -->
        <details id="specialToggles" open>
            <summary>üîß Special In-Game Toggles</summary>
            <p>Enable or configure special in-game features with the following toggles:</p>

            <div class="button-row">
                <button id="enableVulkanBtn">Enable Vulkan</button>
                <button id="forceVulkanBtn">Force Vulkan</button>
                <button id="enableFrameGenBtn">Enable Frame Generation</button>
                <button id="unlockUltraQualityBtn">Unlock Ultra-High Quality</button>
                <button id="resetSpecialTogglesBtn">Reset</button>
                <button id="addAllSpecialTogglesBtn">Add All Toggles</button>
            </div>

            <h3>Generated Engine.ini (Special Toggles)</h3>
            <pre id="specialTogglesOutput" aria-live="polite"></pre>

            <details>
                <summary>üß† Technical Footnote ‚Äî Special Toggles</summary>
                <p>
                    <b>rhi=Vulkan</b> ‚Äî Enables Vulkan rendering backend.<br>
                    <b>r.Vulkan.ForceEnable=1</b> ‚Äî Forces Vulkan even if default backend is different.<br>
                    <b>r.FrameGeneration.Enable=1</b> ‚Äî Enables experimental frame generation / frame interpolation.<br>
                    <b>r.UltraQualityUnlock=1</b> ‚Äî Unlocks ultra-high quality rendering options normally restricted by hardware checks.<br>
                </p>
            </details>
        </details>

        <!-- üéÆ Texture Scaling -->
        <details id="textureScaling" open>
            <summary>üéÆ Far-Distance Texture Quality Scaling</summary>
            <p>Adjust texture streaming and mipmap detail levels (0 = disabled, 11 = ultra).</p>

            <div class="slider-section">
                <label><b>Quality Scale (0 ‚Äì 11)</b></label>
                <input id="slider" type="range" min="0" max="11" value="5" />
                <div class="slider-labels"><span>0</span><span>11</span></div>
            </div>

            <div class="button-row">
                <button id="dec">‚àí Decrease</button>
                <button id="reset">Reset</button>
                <button id="inc">+ Increase</button>
            </div>

            <h3>Generated Engine.ini Variables:</h3>
            <pre id="output" aria-live="polite"></pre>

            <details>
                <summary>üß† Technical Footnote ‚Äî Texture Streaming</summary>
                <p>
                    <b>r.Streaming.Boost / MinBoost</b> ‚Äî Adjusts how aggressively textures are streamed to memory.<br>
                    <b>r.Streaming.GroupBoost.*</b> ‚Äî Per-group sharpness multiplier for building/foliage/NPC groups.<br>
                    <b>r.MipMapLODBias</b> ‚Äî Controls mipmap selection bias (negative ‚áí sharper textures).<br>
                    <b>r.Streaming.FullyLoadUsedTextures</b> ‚Äî Forces textures that are in use to load fully (1 = enable).<br>
                    <b>r.Streaming.MipBias</b> ‚Äî Overall texture mip bias (negative = sharper textures).<br>
                </p>
            </details>
        </details>

        <!-- üåë Shadows Settings -->
        <details id="shadowsSettings">
            <summary>üåë Shadows Settings</summary>
            <p>Control shadow rendering; select Basic (fewer options) or Advanced (full tuning).</p>

            <div class="button-row">
                <button onclick="setShadowMode('basic')">Basic</button>
                <button onclick="setShadowMode('advanced')">Advanced</button>
            </div>

            <div id="shadowMode" style="margin-top:10px; font-weight:bold;">Current Mode: Advanced</div>

            <div class="slider-section" style="margin-top:8px;">
                <label><b>Shadow Quality Scale (0 ‚Äì 11)</b></label>
                <input id="shadowSlider" type="range" min="0" max="11" value="5" oninput="updateShadowQuality()" />
                <div class="slider-labels"><span>0</span><span>11</span></div>
            </div>

            <div class="button-row">
                <button id="shadowDec">‚àí Decrease</button>
                <button id="shadowReset">Reset</button>
                <button id="shadowInc">+ Increase</button>
            </div>

            <h3>Generated Engine.ini (Shadows)</h3>
            <pre id="shadowOutput" aria-live="polite"></pre>

            <details>
                <summary>üß† Technical Footnote ‚Äî Shadow Settings</summary>
                <p>
                    <b>r.ShadowQuality</b> ‚Äî Overall shadow quality (0 = off, up to 5 usually).<br>
                    <b>r.Shadow.CSM.MaxCascades</b> ‚Äî Number of cascades (more = smoother farther shadows).<br>
                    <b>r.Shadow.CSM.MaxDistance / FarShadowDistanceOverride</b> ‚Äî How far cascaded shadows are computed.<br>
                    <b>r.Shadow.MinResolution / r.Shadow.MaxResolution</b> ‚Äî Minimum/maximum shadow map sizes.<br>
                    <b>r.Shadow.TexelsPerPixel / PCFMaxSamples</b> ‚Äî Shadow filtering density and sample budget for softness.<br>
                    <b>r.ContactShadows / r.CapsuleShadows</b> ‚Äî Adds fine-scale or character-specific shadows.<br>
                    <b>r.DistanceFieldShadowing</b> ‚Äî Distance-field shadows for very large soft shadows.<br>
                </p>
            </details>
        </details>

        <!-- üóëÔ∏è Garbage Collection -->
        <details id="garbageCollection">
            <summary>üóëÔ∏è Garbage Collection Settings</summary>
            <p>Control garbage collection behavior to optimize memory usage and performance.</p>

            <div class="button-row">
                <button id="gcDec">‚àí Decrease</button>
                <button id="gcReset">Reset</button>
                <button id="gcInc">+ Increase</button>
            </div>

            <h3>Generated Engine.ini (Garbage Collection)</h3>
            <pre id="gcOutput" aria-live="polite"></pre>

            <details>
                <summary>üß† Technical Footnote ‚Äî Garbage Collection</summary>
                <p>
                    <b>gc.TimeBetweenPurgingPendingKillObjects</b> ‚Äî Time (seconds) between purging objects marked for deletion.<br>
                    <b>gc.NumRetriesBeforeForcingGC</b> ‚Äî Number of retries before forcing GC.<br>
                    <b>gc.MinDesiredObjectsPerSubTask</b> ‚Äî Minimum objects per GC subtask.<br>
                    <b>gc.BlueprintClusteringEnabled</b> ‚Äî Enables clustering of blueprints for GC.<br>
                    <b>gc.FlushStreamingOnGC</b> ‚Äî Flushes streaming data during GC.<br>
                    <b>gc.ValidateGCHeap</b> ‚Äî Validates the GC heap.<br>
                    <b>gc.StallCollectionWhileWaiting</b> ‚Äî Stalls GC while waiting for resources.<br>
                    <b>gc.RandomFrequency</b> ‚Äî Frequency of random GC.<br>
                    <b>gc.MaxObjectsNotConsideredByGC</b> ‚Äî Max objects ignored by GC.<br>
                    <b>gc.AllowInitialGarbageCollection</b> ‚Äî Allows GC at startup.<br>
                    <b>gc.CollectGarbageEveryFrame</b> ‚Äî Forces GC every frame.<br>
                    <b>gc.ForceGCAtRegularInterval</b> ‚Äî Forces GC at regular intervals.<br>
                    <b>gc.MinGCClusterSize / gc.MaxGCClusterSize</b> ‚Äî Min/max size of GC clusters.<br>
                    <b>gc.VerifyUObjectsAreNotFGCObjects</b> ‚Äî Ensures UObjects are not flagged incorrectly.<br>
                    <b>gc.DisableAutomaticGC</b> ‚Äî Disables automatic GC entirely.<br>
                </p>
            </details>
        </details>

        <!-- üß≠ Utilities -->
        <div class="utility-buttons" role="toolbar" aria-label="Utilities">
            <button onclick="collapseAll()">Collapse All</button>
            <button onclick="expandAll()">Expand All</button>
            <button onclick="window.scrollTo({top:0,behavior:'smooth'})">Back to Top</button>
        </div>

        <!-- üóÇÔ∏è Floating Checklist -->
        <div id="engineIniContents" class="draggable" style="position: absolute;">
            <h3>Engine.ini Contents</h3>
            <ul>
                <li>
                    <label>
                        <a href="#specialToggles" onclick="navigateToSection('specialToggles')">üîß Special Toggles</a>
                        <input type="checkbox" id="includeSpecialToggles" checked>
                    </label>
                </li>
                <li>
                    <label>
                        <a href="#textureScaling" onclick="navigateToSection('textureScaling')">üéÆ Texture Scaling</a>
                        <input type="checkbox" id="includeTextureScaling" checked>
                    </label>
                </li>
                <li>
                    <label>
                        <a href="#shadowsSettings" onclick="navigateToSection('shadowsSettings')">üåë Shadows</a>
                        <input type="checkbox" id="includeShadows" checked>
                    </label>
                </li>
                <li>
                    <label>
                        <a href="#garbageCollection" onclick="navigateToSection('garbageCollection')">üóëÔ∏è Garbage Collection</a>
                        <input type="checkbox" id="includeGarbageCollection" checked>
                    </label>
                </li>
            </ul>
            <div class="button-row">
                <button id="selectAllBtn">Select All</button>
                <button id="resetChecklistBtn">Reset</button>
            </div>
            <hr class="separator" />
            <h4 class="mini-title">File Generation</h4>
            <div class="button-row">
                <button id="resetBtn">üßπ Reset All Configs</button>
                <button id="generateBtn">‚öôÔ∏è Generate Engine.ini</button>
            </div>
        </div>

        <footer>
            Made by Arglax (GPT-assisted)
        </footer>
    </main>

    <!-- ‚úÖ External JS -->
    <script src="js/scripts.js"></script>
</body>
</html>
